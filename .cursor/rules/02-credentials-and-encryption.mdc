---
description: Encrypted credentials & application secrets; record encryption for PII
alwaysApply: true
---

## Encrypted credentials
- Access secrets via `Rails.application.credentials` (e.g., `credentials.dig(:aws, :access_key_id)`).
- In production, set `config.require_master_key = true` and provide `RAILS_MASTER_KEY` through the environment/secret store.
- Prefer per-environment credentials (e.g., `config/credentials/production.yml.enc`) for keys that differ by env.

## Active Record Encryption (PII)
- Encrypt sensitive attributes at rest:
  ```ruby
  class Customer < ApplicationRecord
    encrypts :ssn, :dob
  end
  ```
- Do not reinvent crypto; use Railsâ€™ built-in Active Record Encryption for columns requiring confidentiality.

## Logging

- Filter secrets (`config.filter_parameters`) so sensitive keys never hit logs.
